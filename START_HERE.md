# 🎉 Stock AI Analyzer - 启动成功！

## ✅ 当前状态

你的股市AI分析系统已经成功启动并运行！

**访问地址：**
- 🏠 本地访问：http://localhost:3000
- 🌐 局域网访问：http://192.168.101.71:3000

---

## ⚠️ 重要：配置 DeepSeek API Key

在使用系统之前，你**必须**配置 DeepSeek API Key，否则 AI 分析功能无法工作。

### 步骤：

1. **获取 API Key**
   - 访问：https://platform.deepseek.com/
   - 注册/登录账号
   - 进入 "API Keys" 页面
   - 点击 "Create API Key"
   - 复制生成的 Key（格式：sk-xxxxxxxxxx）

2. **配置到项目**

   编辑项目根目录的 `.env.local` 文件：

   ```env
   DEEPSEEK_API_KEY=sk-你的真实API-Key
   ```

3. **重启服务器**

   配置完成后，重启开发服务器：
   - 按 `Ctrl+C` 停止当前服务器
   - 运行 `npm run dev` 重新启动

---

## 🚀 快速使用

### 1️⃣ 上传并分析股市图表

1. 访问首页：http://localhost:3000
2. 点击上传区域，选择股市 K 线图（PNG/JPG）
3. （可选）填写补充描述
4. 点击 "🤖 AI 分析"
5. 等待 5-10 秒，查看结果

**分析结果包含：**
- 📍 支撑位和阻力位
- 📈 操作方向（做多/做空/观望）
- ⚠️ 止损位
- 🎯 目标位
- 💡 详细分析逻辑

### 2️⃣ 每日复盘（关键功能）

**收盘后复盘流程：**

1. 点击导航栏的 "历史记录"
2. 找到今天的分析（状态：待复盘）
3. 点击 "开始复盘"
4. 填写实际数据：
   - 实际最高价
   - 实际最低价
   - 实际收盘价
5. （可选）写复盘总结
6. 提交 → 系统自动计算准确率

**为什么要复盘？**
- 系统会学习你的复盘数据
- 下次分析时自动参考历史经验
- **复盘越多，AI 越准确！**

---

## 🧠 持续学习原理

每次新分析时，系统会：
1. 读取最近 5 条已复盘的记录
2. 整理成「预测 vs 实际」对比
3. 作为经验传给 DeepSeek AI
4. AI 参考历史优化预测

**示例：**
```
历史分析参考：
日期: 2025-01-15
预测: 做多, 目标: 3350
实际: 最高3345, 最低3210, 收盘3330
准确率: 85%
经验总结: 预测基本准确，阻力位略有偏差
```

---

## 📋 项目结构

```
/Users/zhousong/Desktop/stock_analysis_system/stock_analysis_system/
├── app/                    # 页面和API
│   ├── page.tsx           # 首页（分析页面）
│   ├── history/           # 历史记录页面
│   └── api/               # API路由
├── lib/                   # 核心库
│   ├── deepseek.ts       # DeepSeek API集成
│   └── storage.ts        # 文件存储
├── data/                  # 数据存储
│   ├── analyses.json     # 分析记录
│   ├── reviews.json      # 复盘记录
│   └── uploads/          # 上传的图片
└── .env.local            # 环境变量（需配置）
```

---

## 💡 使用技巧

### 上传图片建议

✅ **好的图片：**
- 清晰的 K 线图
- 包含成交量
- 至少 20-30 根 K 线
- 显示技术指标（MACD、KDJ、RSI等）

❌ **避免：**
- 模糊截图
- 截断不完整
- 纯文字图片

### 补充描述示例

```
大盘今日震荡，成交量较昨日萎缩20%，
MACD即将金叉，KDJ处于超卖区域，
建议关注3200点支撑位
```

### 复盘总结示例

```
预测方向正确，但目标位略有偏差。
实际最高3340，低于预测的3350。
原因：午后消息面利空导致回调。
下次需要更关注盘中消息面变化。
```

---

## 🔧 常见问题

### Q1: API 调用失败

**A:** 检查：
1. `.env.local` 中的 API Key 是否正确
2. DeepSeek 账户是否有余额
3. 网络是否正常
4. 浏览器控制台是否有错误

### Q2: 图片上传后没反应

**A:**
1. 确认图片格式（仅支持 PNG/JPG/JPEG）
2. 图片大小建议 < 5MB
3. 打开浏览器开发者工具查看错误

### Q3: 准确率怎么计算？

**A:** 简化算法（可自定义）：
- 方向正确 + 价格接近 = 70-100分
- 方向正确但偏差大 = 40-70分
- 方向错误 = 0-30分

### Q4: 数据会丢失吗？

**A:** 不会。数据保存在本地：
- `data/analyses.json` - 所有分析记录
- `data/reviews.json` - 所有复盘记录
- `public/uploads/` - 上传的图片

建议定期备份 `data/` 目录！

### Q5: 可以同时分析多只股票吗？

**A:** 可以！每次上传都会保存为独立的分析记录。

---

## 📊 数据管理

### 查看数据

分析记录存储在 JSON 文件中：

```bash
# 查看所有分析
cat data/analyses.json

# 查看所有复盘
cat data/reviews.json
```

### 备份数据

```bash
# 备份到其他位置
cp -r data/ ~/Desktop/stock_ai_backup/
```

### 清空数据

```bash
# 清空所有记录（谨慎！）
echo '[]' > data/analyses.json
echo '[]' > data/reviews.json
```

---

## 🚀 下一步优化

你可以根据需求自定义：

1. **准确率算法** - 修改 `app/api/reviews/route.ts`
2. **AI Prompt** - 修改 `lib/deepseek.ts` 中的系统提示词
3. **UI 样式** - 修改 `app/globals.css` 和各页面组件
4. **历史学习数量** - 修改 `lib/storage.ts` 中的 `.slice(-5)` 改为其他数字

---

## 📚 相关文档

- [README.md](README.md) - 完整项目文档
- [QUICK_START.md](QUICK_START.md) - 快速开始指南

---

## ⚙️ 常用命令

```bash
# 开发模式（当前正在运行）
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm run start

# 安装新依赖
npm install <package-name>
```

---

## 🎯 每日工作流程建议

### 上午 / 交易时段
1. 打开首页
2. 上传大盘或关注股票的 K 线图
3. 获取 AI 操作建议
4. 参考建议进行交易决策

### 收盘后（15:00+）
1. 进入历史记录页面
2. 对今天的分析进行复盘
3. 输入实际价格数据
4. 提交复盘并查看准确率

### 定期（每周/每月）
1. 备份 `data/` 目录
2. 查看历史准确率趋势
3. 总结 AI 预测的优缺点
4. 调整分析策略

---

## 💰 成本说明

**DeepSeek API 计费：**
- 图片 + 文本分析：约 ¥0.1-0.3 / 次
- 每天分析 10 次：约 ¥1-3
- 每月成本：约 ¥30-90

建议先充值小额（¥10-20）测试使用。

---

## 🎉 开始使用吧！

1. ✅ 配置 `.env.local` 中的 API Key
2. ✅ 重启服务器（Ctrl+C 然后 npm run dev）
3. ✅ 访问 http://localhost:3000
4. ✅ 上传第一张 K 线图试试！

**祝你投资顺利！** 📈

---

*如有问题，请查看项目 README.md 或控制台错误信息*
